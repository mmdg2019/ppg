<?xml version="1.0" encoding="UTF-8"?>
<odoo>
   <report id="sale_xml_report"
           string="sale_xml_report"
           model="sale.report.wizard"
           report_type="qweb-pdf"
           file="export_stock.report_sale_docs"
           name="export_stock.report_sale_docs"/>
    
    <template id="report_sale_docs">
<!--        <MAINHEADER>
           <DATEDETAILS>
               <STARTDATE t-esc="start_date"/>
               <ENDDATE t-esc="end_date"/>
           </DATEDETAILS>
           <SALEDETAILS t-foreach="dat" t-as="sales">
               <NUMBER t-esc="sales['sale_sequence']"/>
               <AMOUNT t-esc="sales['total_amount']"/>
               <SALESPERSON t-esc="sales['sales_person_name']"/>
           </SALEDETAILS>
       </MAINHEADER> -->
        <t t-call="web.html_container">
            <html t-att-lang="lang and lang.replace('_', '-')" t-att-data-report-margin-top="data_report_margin_top" t-att-data-report-header-spacing="data_report_header_spacing" t-att-data-report-dpi="data_report_dpi" t-att-data-report-landscape="data_report_landscape" t-att-web-base-url="web_base_url">
                <head>
                    <meta charset="utf-8"/>
                    <meta name="viewport" content="initial-scale=1"/>
                    <title>
                        <t t-esc="title or 'Odoo Report'"/>
                    </title>
                    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous" />
                    <link rel='stylesheet' href="/popular_reports/static/src/css/style.css"/>
                    <t t-call-assets="web.report_assets_common" t-js="false"/>
                    <t t-call-assets="web.assets_common" t-css="false"/>
                    <t t-call-assets="web.report_assets_common" t-css="false"/>
                    <t t-if="studio" t-call-assets="web_studio.report_assets"/>
                    <t t-if="env and env.context.get('snailmail_layout')" t-call-assets="snailmail.report_assets_snailmail"/>
                    <t t-if="env and env.context.get('snailmail_layout')" t-call-assets="snailmail_account_followup.followup_report_assets_snailmail"/>

                </head>
                <body>
                    <div class="container-fluid" id="wrapwrap">
                        <div class="row" style="text-align:center;">
                            <div class="col">
                                <b>
                                    <font style="font-size: 30px;">
                                        <span t-field="res_company.name"/>
                                    </font>
                                </b>
                            </div>
                        </div>
                        <div class="row" style="text-align:center;">
                            <div class="col">
                                <b>
                                    <font style="font-size: 24px;">
                                        <span>Sales Report by Product Code (After Approval)</span>
                                    </font>
                                </b>
                            </div>
                        </div>
                        <br/>
                        <br/>
                        <br/>
                        <table class="table o_report_block_table" style="padding: 0.5em; font-size: 13px;">
                            <thead>
                                <tr>
                                    <th>
                                        <span>Invoice Date</span>
                                    </th>
                                    <th>
                                        <span>Code No.</span>
                                    </th>
                                    <th>
                                        <span>Name</span>
                                    </th>
                                    <th>
                                        <span>Sales Price</span>
                                    </th>
                                    <th>
                                        <span>UM</span>
                                    </th>
                                    <th>
                                        <span>Quantity</span>
                                    </th>
                                    <th>
                                        <span>Amount</span>
                                    </th>                                
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="sub" t-value="0"/>
                                <t t-set="sub_name" t-value=""/>
                                <t t-set="ttl_amount" t-value="0"/>
                                <t t-foreach="docs" t-as="table_line">
                                <t t-set="ttl_amount" t-value="ttl_amount + (table_line.sales_count * table_line.list_price)"/>                               
                                    <tr>
                                        <td>
                                            <span t-esc="context_timestamp(table_line.create_date).strftime('%m/%d/%Y')"/>
                                        </td>
                                        <td>
                                            <span t-field="table_line.default_code"/>
                                        </td>
                                        <td>
                                            <span t-field="table_line.name"/>
                                        </td>
                                        <td style="text-align:right;">
                                            <span t-esc="table_line.list_price" t-options="{'widget': 'monetary', 'display_currency': docs.currency_id}"/>
                                        </td>
                                        <td style="text-align:center;">
                                            <span t-field="table_line.uom_name"/>
                                        </td>
                                        <td style="text-align:right;">
                                            <span t-field="table_line.sales_count"/>
                                        </td>
                                        <td style="text-align:right;">
                                            <span t-esc="table_line.sales_count * table_line.list_price" t-options="{'widget': 'monetary', 'display_currency': docs.currency_id}"/>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                            
                            <tfooter>
                                <t t-set="total_currency_id" t-value="docs.currency_id"/>
                                <t t-set="ttl" t-value="0"/>
                                <tr>
                                    <th>
                                        <span></span>
                                    </th>
                                    <th>
                                        <span></span>
                                    </th>
                                    <th>
                                        <span></span>
                                    </th>
                                    <th>
                                        <span></span>
                                    </th>
                                    <th colspan="2">
                                        <span>Grand Total</span>
                                    </th>
                                    <th style="text-align:right;">
                                        <span><t t-esc="ttl_amount" t-options="{'widget': 'monetary', 'display_currency': total_currency_id}"/></span>
                                    </th>
                                </tr>
                            </tfooter>
                        </table>
                    </div>
                    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
                    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
                    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
                </body>
            </html>
        </t>
   </template>
</odoo>