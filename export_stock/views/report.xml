<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    
   <report id="sale_xml_report"
           string="sale_xml_report"
           model="account.move"
           report_type="qweb-pdf"
           file="export_stock.report_sale_docs"
           name="export_stock.report_sale_docs"/>
    
    <report
        id="sales_report_by_client"
        model="account.move"
        string="Sales Report by Client"
        report_type="qweb-pdf"
        name="export_stock.report_sales_report_by_client"
        file="export_stock.report_sales_report_by_client"
        print_report_name="Sales Report by Client"
    />
    
<!--                                     <tbody>
                                        <tr>
                                            <td>
                                                <span t-esc="context_timestamp(table_line.create_date).strftime('%m/%d/%Y')"/>
                                            </td>
                                            <td>
                                                <span t-field="table_line.product_id"/>
                                            </td>
                                            <td>
                                                <t t-if="table_line_first">
                                                    <span t-field="doc.partner_id.display_name"/>
                                                </t>
                                            </td>
                                            <td style="text-align:right;">
                                                <span t-esc="table_line.price_unit" t-options="{'widget': 'monetary', 'display_currency': docs.currency_id}"/>
                                            </td>
                                            <td style="text-align:center;">
                                                <span t-field="table_line.product_uom_id"/>
                                            </td>
                                            <td style="text-align:right;">
                                                <span t-field="table_line.quantity"/>
                                            </td>
                                            <td style="text-align:right;">
                                                <span t-esc="table_line.quantity * table_line.price_unit" t-options="{'widget': 'monetary', 'display_currency': docs.currency_id}"/>
                                            </td>
                                        </tr>
                                    </tbody> -->
    <template id="report_sale_docs">
        <t t-call="web.html_container">
            <html t-att-lang="lang and lang.replace('_', '-')" t-att-data-report-margin-top="data_report_margin_top" t-att-data-report-header-spacing="data_report_header_spacing" t-att-data-report-dpi="data_report_dpi" t-att-data-report-landscape="data_report_landscape" t-att-web-base-url="web_base_url">
                <head>
                    <meta charset="utf-8"/>
                    <meta name="viewport" content="initial-scale=1"/>
                    <title>
                        <t t-esc="title or 'Odoo Report'"/>
                    </title>
                    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous" />
                    <link rel='stylesheet' href="/popular_reports/static/src/css/style.css"/>
                    <t t-call-assets="web.report_assets_common" t-js="false"/>
                    <t t-call-assets="web.assets_common" t-css="false"/>
                    <t t-call-assets="web.report_assets_common" t-css="false"/>
                    <t t-if="studio" t-call-assets="web_studio.report_assets"/>
                    <t t-if="env and env.context.get('snailmail_layout')" t-call-assets="snailmail.report_assets_snailmail"/>
                    <t t-if="env and env.context.get('snailmail_layout')" t-call-assets="snailmail_account_followup.followup_report_assets_snailmail"/>

                </head>
                <body>
                    <div class="container-fluid" id="wrapwrap">
                        <div class="row" style="text-align:center;">
                            <div class="col">
                                <b>
                                    <font style="font-size: 30px;">
                                        <span t-field="res_company.name"/>
                                    </font>
                                </b>
                            </div>
                        </div>
                        <div class="row" style="text-align:center;">
                            <div class="col">
                                <b>
                                    <font style="font-size: 24px;">
                                        <span>Sales Report by Product Code (After Approval)</span>
                                    </font>
                                </b>
                            </div>
                        </div>
                        <br/>
                        <br/>
                        <br/>
                        <div class="row" style="text-align:center; font-size: 20px;">
                            <div class="col">
                                <span>
                                    <b>From : </b><t t-esc="datetime.datetime.strptime(start_date, '%Y-%m-%d').strftime('%m/%d/%Y')"/>
                                </span>
                                <span>
                                    <b>To : </b><t t-esc="datetime.datetime.strptime(end_date, '%Y-%m-%d').strftime('%m/%d/%Y')"/>
                                </span>
                            </div>
                        </div>
                        <br/>
                        <table class="table o_report_block_table" style="padding: 0.5em; font-size: 13px;">
                            <thead>
                                <tr>
                                    <th>
                                        <span>Invoice Date</span>
                                    </th>
                                    <th>
                                        <span>Product No.</span>
                                    </th>
                                    <th>
                                        <span>Customer Name</span>
                                    </th>
                                    <th>
                                        <span>UM</span>
                                    </th>
                                    <th>
                                        <span>Quantity</span>
                                    </th>
                                    <th>
                                        <span>Sales Price</span>
                                    </th>
                                    <th>
                                        <span>Amount</span>
                                    </th>                                
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="sub" t-value="0"/>
                                <t t-set="sub_date" t-value=""/>
                                <t t-set="currency_id" t-value="docs.currency_id"/>
                                <t t-set="sub_ttl" t-value="0"/>
                                <t t-set="ttl" t-value="0"/>
                                <t t-foreach="docs.sorted(key=lambda x:x.invoice_date,reverse=False)" t-as="doc">
                                    <t t-if="doc_first">
                                        <t t-set="sub_date" t-value="doc.invoice_date"/>
                                    </t>
                                    <t t-else="">
                                        <t t-if="sub_date != doc.invoice_date">
                                            <t t-set="sub_date" t-value="doc.invoice_date"/>
                                            <t t-set="sub" t-value="1"/>
                                        </t>
                                        <t t-else="">
                                            <t t-set="sub" t-value="0"/>
                                        </t>
                                    </t>
                                    <t t-if="sub==1">
                                        <tr>
                                            <th>
                                                <span></span>
                                            </th>
                                            <th>
                                                <span></span>
                                            </th>
                                            <th>
                                                <span>Sub Total</span>
                                            </th>
                                            <th style="text-align:right;">
                                                <span><t t-esc="sub_ttl" t-options="{'widget': 'monetary', 'display_currency': currency_id}"/></span>
                                            </th>
                                            <th>
                                                <span></span>
                                            </th>
                                        </tr>
                                        <t t-set="sub_ttl" t-value="0"/>
                                    </t>
                                    <t t-foreach="doc.invoice_line_ids" t-as="table_line"  t-if="table_line.name != &quot;Special Discount&quot; and table_line.name != &quot;Other Charges&quot; and table_line.product_id.display_name in product_ids">
                                        <tr>
                                            <td>
                                                <t t-if="table_line_first">
                                                    <span t-field="doc.invoice_date"/>
                                                </t>
                                                <t t-else="">
                                                    <t t-if="sub==1">
                                                       <span t-field="doc.invoice_date"/>
                                                    </t>
                                                </t>                         
                                            </td>
                                            <td>
                                                <t t-if="table_line_first">
                                                    <span t-field="doc.partner_id.display_name"/>
                                                </t>
                                                <t t-else="">
                                                    <t t-if="sub==1">
                                                       <span t-field="doc.partner_id.display_name"/>
                                                    </t>
                                                </t>                         
                                            </td>
                                            <td>
                                                <span t-field="table_line.product_id"/>
                                            </td>
                                            <td style="text-align:center;">
                                                <span t-field="table_line.product_id.uom_name"/>
                                            </td>
                                            <td style="text-align:right;">
                                                <span t-field="table_line.quantity"/>
                                            </td>
                                            <td style="text-align:right;">
                                                <span t-field="table_line.price_unit"/>
                                            </td>
                                            <td style="text-align:right;">
                                                <span t-field="table_line.price_subtotal"/>
                                                <t t-set="sub_ttl" t-value="sub_ttl + table_line.price_subtotal"/>
                                                <t t-set="ttl" t-value="ttl + table_line.price_subtotal"/>

                                            </td>
                                        </tr>
                                    <t t-if="doc_first"></t>
                                    <t t-else="">
                                        <t t-if="sub==1"></t>
                                        <t t-else="">
                                            <t t-set="sub" t-value="0"/>
                                        </t>
                                        </t>
                                    </t>
                                    <t t-if="doc_last">
                                        <tr>
                                            <th>
                                                <span></span>
                                            </th>
                                            <th>
                                                <span></span>
                                            </th>
                                            <th>
                                                <span>Sub Total</span>
                                            </th>
                                            <th style="text-align:right;">
                                                <span><t t-esc="sub_ttl" t-options="{'widget': 'monetary', 'display_currency': currency_id}"/></span>
                                            </th>
                                        </tr>
                                    </t>
                                </t>
                            </tbody>
                            <tfooter>
                                <tr>
                                    <th>
                                        <span></span>
                                    </th>
                                    <th>
                                        <span></span>
                                    </th>
                                    <th>
                                        <span>Grand Total</span>
                                    </th>
                                    <th style="text-align:right;">
                                        <t t-if="currency_id">
                                        <span><t t-esc="ttl" t-options="{'widget': 'monetary', 'display_currency': currency_id}"/></span>
                                        </t>
                                    </th>
                                </tr>
                            </tfooter>
                        </table>
                    </div>
                    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
                    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
                    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
                </body>
            </html>
        </t>
   </template>
    <template id="report_sales_report_by_client">
        <t t-call="web.html_container">
            <html t-att-lang="lang and lang.replace('_', '-')" t-att-data-report-margin-top="data_report_margin_top" t-att-data-report-header-spacing="data_report_header_spacing" t-att-data-report-dpi="data_report_dpi" t-att-data-report-landscape="data_report_landscape" t-att-web-base-url="web_base_url">
                <head>
                    <meta charset="utf-8"/>
                    <meta name="viewport" content="initial-scale=1"/>
                    <title>
                        <t t-esc="title or 'Odoo Report'"/>
                    </title>
                    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous" />
                    <link rel='stylesheet' href="/popular_reports/static/src/css/style.css"/>
                    <t t-call-assets="web.report_assets_common" t-js="false"/>
                    <t t-call-assets="web.assets_common" t-css="false"/>
                    <t t-call-assets="web.report_assets_common" t-css="false"/>
                    <t t-if="studio" t-call-assets="web_studio.report_assets"/>
                    <t t-if="env and env.context.get('snailmail_layout')" t-call-assets="snailmail.report_assets_snailmail"/>
                    <t t-if="env and env.context.get('snailmail_layout')" t-call-assets="snailmail_account_followup.followup_report_assets_snailmail"/>

                </head>
                <body>
                    <div class="container-fluid" id="wrapwrap">
                        <div class="row" style="text-align:center;">
                            <div class="col">
                                <b>
                                    <font style="font-size: 30px;">
                                        <span t-field="res_company.name"/>
                                    </font>
                                </b>
                            </div>
                        </div>
                        <div class="row" style="text-align:center;">
                            <div class="col">
                                <b>
                                    <font style="font-size: 24px;">
                                        <span>Sales Report by Client (After Approval)</span>
                                    </font>
                                </b>
                            </div>
                        </div>
                        <br/>
                        <br/>
                        <br/>
                        <table class="table o_report_block_table" style="padding: 0.5em; font-size: 13px;">
                            <thead>
                                <tr>
                                    <th>
                                        <span>Invoice/Bill Date</span>
                                    </th>
                                    <th>
                                        <span>Client Name</span>
                                    </th>
                                    <th>
                                        <span>Invoice Number</span>
                                    </th>
                                    <th>
                                        <span>Pay Amount</span>
                                    </th>
                                    <th>
                                        <span>Other Charges</span>
                                    </th>
                                    <th>
                                        <span>Discount</span>
                                    </th>
                                    <th>
                                        <span>Total</span>
                                    </th>
                                    <th>
                                        <span>Payment</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="sub" t-value="0"/>
                                <t t-set="sub_name" t-value=""/>
                                <t t-set="sub_total_currency_id" t-value="docs.currency_id"/>
                                <t t-set="sub_ttl" t-value="0"/>
                                <t t-set="sub_ttl_due" t-value="0"/>
                                <t t-set="sub_ttl_other_charges" t-value="0"/>
                                <t t-set="sub_ttl_discount_amount" t-value="0"/>
                                <t t-set="sub_ttl_tax_excluded" t-value="0"/>
                                <t t-foreach="docs" t-as="table_line">
                                    <t t-if="table_line_first">
                                        <t t-set="sub_name" t-value="table_line.partner_id.display_name"/>
                                    </t>
                                    <t t-else="">
                                        <t t-if="sub_name != table_line.partner_id.display_name">
                                            <t t-set="sub_name" t-value="table_line.partner_id.display_name"/>
                                            <t t-set="sub" t-value="1"/>
                                        </t>
                                        <t t-else="">
                                            <t t-set="sub" t-value="0"/>
                                        </t>
                                    </t>
                                    <t t-if="sub==1">
                                        <tr>
                                            <th>
                                                <span></span>
                                            </th>
                                            <th>
                                                <span></span>
                                            </th>
                                            <th>
                                                <span>Sub Total</span>
                                            </th>
                                            <th style="text-align:right;">
                                                <span><t t-esc="sub_ttl-sub_ttl_due" t-options="{'widget': 'monetary', 'display_currency': sub_total_currency_id}"/></span>
                                            </th>
                                            <th style="text-align:right;">
<!--                                                 <span><t t-esc="sub_ttl_other_charges" t-options="{'widget': 'monetary', 'display_currency': sub_total_currency_id}"/></span> -->
                                            </th>
                                            <th style="text-align:right;">
<!--                                                 <span><t t-esc="sub_ttl_discount_amount" t-options="{'widget': 'monetary', 'display_currency': sub_total_currency_id}"/></span> -->
                                            </th>
                                            <th style="text-align:right;">
                                                <span><t t-esc="sub_ttl" t-options="{'widget': 'monetary', 'display_currency': sub_total_currency_id}"/></span>
                                            </th>
                                            <th>
                                                <span></span>
                                            </th>
                                        </tr>
                                        <t t-set="sub_total_currency_id" t-value="docs.currency_id"/>
                                        <t t-set="sub_ttl" t-value="0"/>
                                        <t t-set="sub_ttl_due" t-value="0"/>
<!--                                         <t t-set="sub_ttl_other_charges" t-value="0"/> -->
<!--                                         <t t-set="sub_ttl_discount_amount" t-value="0"/> -->
                                        <t t-set="sub_ttl_tax_excluded" t-value="0"/>
                                    </t>
                                    <tr>
                                        <td>
                                            <span t-field="table_line.invoice_date"/>
                                        </td>
                                        <td>
                                            <t t-if="table_line_first">
                                                <span t-field="table_line.partner_id.display_name"/>
                                            </t>
                                            <t t-else="">
                                                <t t-if="sub==1">
                                                   <span t-field="table_line.partner_id.display_name"/>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="sub" t-value="0"/>
                                                </t>
                                            </t>                         
                                        </td>
                                        <td>
                                            <span t-field="table_line.display_name"/>
                                        </td>
                                        <td style="text-align:right;">
                                            <span t-esc="table_line.amount_total_signed-table_line.amount_residual_signed" t-options="{'widget': 'monetary', 'display_currency': docs.currency_id}"/>
                                        </td>
                                        <td style="text-align:right;">
<!--                                             <span t-field="table_line.x_studio_other_charges_i"/> -->
                                        </td>
                                        <td style="text-align:right;">
<!--                                             <span t-field="table_line.x_studio_special_discount_amount_i"/> -->
                                        </td>
                                        <td style="text-align:right;">
                                            <span t-field="table_line.amount_total_signed"/>
                                        </td>
                                        <td>
                                            <span t-field="table_line.invoice_payment_state"/>
                                        </td>
                                    </tr>
                                    <t t-set="sub_ttl" t-value="sub_ttl + table_line.amount_total_signed"/>
<!--                                     <t t-set="sub_ttl_other_charges" t-value="sub_ttl_other_charges + table_line.x_studio_other_charges_i"/> -->
<!--                                     <t t-set="sub_ttl_discount_amount" t-value="sub_ttl_discount_amount + table_line.x_studio_special_discount_amount_i"/> -->
                                    <t t-set="sub_ttl_due" t-value="sub_ttl_due + table_line.amount_residual_signed"/>
                                    <t t-set="sub_ttl_tax_excluded" t-value="sub_ttl_tax_excluded + table_line.amount_untaxed_signed"/>
                                    <t t-if="table_line_last">
                                        <tr>
                                            <th>
                                                <span></span>
                                            </th>
                                            <th>
                                                <span></span>
                                            </th>
                                            <th>
                                                <span>Sub Total</span>
                                            </th>
                                            <th style="text-align:right;">
                                                <span><t t-esc="sub_ttl-sub_ttl_due" t-options="{'widget': 'monetary', 'display_currency': sub_total_currency_id}"/></span>
                                            </th>
                                            <th style="text-align:right;">
<!--                                                 <span><t t-esc="sub_ttl_other_charges" t-options="{'widget': 'monetary', 'display_currency': sub_total_currency_id}"/></span> -->
                                            </th>
                                            <th style="text-align:right;">
<!--                                                 <span><t t-esc="sub_ttl_discount_amount" t-options="{'widget': 'monetary', 'display_currency': sub_total_currency_id}"/></span> -->
                                            </th>
                                            <th style="text-align:right;">
                                                <span><t t-esc="sub_ttl" t-options="{'widget': 'monetary', 'display_currency': sub_total_currency_id}"/></span>
                                            </th>
                                            <th>
                                                <span></span>
                                            </th>
                                        </tr>
                                    </t>
                                </t>
                            </tbody>
                            <tfooter>
                                <t t-set="total_currency_id" t-value="docs.currency_id"/>
                                <t t-set="ttl" t-value="0"/>
                                <t t-set="ttl_due" t-value="0"/>
                                <t t-set="ttl_other_charges" t-value="0"/>
                                <t t-set="ttl_discount_amount" t-value="0"/>
                                <t t-set="ttl_tax_excluded" t-value="0"/>
                                <t t-foreach="docs" t-as="table_line">
                                    <t t-set="ttl" t-value="ttl + table_line.amount_total_signed"/>
<!--                                     <t t-set="ttl_other_charges" t-value="ttl_other_charges + table_line.x_studio_other_charges_i"/> -->
<!--                                     <t t-set="ttl_discount_amount" t-value="ttl_discount_amount + table_line.x_studio_special_discount_amount_i"/> -->
                                    <t t-set="ttl_due" t-value="ttl_due + table_line.amount_residual_signed"/>
                                    <t t-set="ttl_tax_excluded" t-value="ttl_tax_excluded + table_line.amount_untaxed_signed"/>
                                </t>
                                <tr>
                                    <th>
                                        <span></span>
                                    </th>
                                    <th>
                                        <span></span>
                                    </th>
                                    <th>
                                        <span>Grand Total</span>
                                    </th>
                                    <th style="text-align:right;">
                                        <span><t t-esc="ttl-ttl_due" t-options="{'widget': 'monetary', 'display_currency': total_currency_id}"/></span>
                                    </th>
                                    <th style="text-align:right;">
                                        <span><t t-esc="ttl_other_charges" t-options="{'widget': 'monetary', 'display_currency': total_currency_id}"/></span>
                                    </th>
                                    <th style="text-align:right;">
                                        <span><t t-esc="ttl_discount_amount" t-options="{'widget': 'monetary', 'display_currency': total_currency_id}"/></span>
                                    </th>
                                    <th style="text-align:right;">
                                        <span><t t-esc="ttl" t-options="{'widget': 'monetary', 'display_currency': total_currency_id}"/></span>
                                    </th>
                                    <th>
                                        <span></span>
                                    </th>
                                </tr>
                            </tfooter>
                        </table>
                    </div>
                    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
                    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
                    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
                </body>
            </html>
        </t>
    </template>
                                        
</odoo>